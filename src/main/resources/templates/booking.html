<!DOCTYPE html>
<html lang="da" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book saunaen</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<!-- NAVBAR (genbrug fra login/profil) -->
<header class="site-header">
    <div class="header-inner">

        <a href="/static" class="logo" aria-label="Bølgebaderne - hjem">
            <img src="/images/logo.png" alt="Bølgebaderne logo">
        </a>

        <div class="mobile-lang">
            <button class="lang-switch" data-lang="da">DA</button>
            <button class="lang-switch" data-lang="en">EN</button>
        </div>

        <button class="nav-toggle"
                aria-expanded="false"
                aria-controls="main-nav"
                aria-label="Åbn menu">
            <span class="bars" aria-hidden="true">☰</span>
        </button>

        <nav id="main-nav" class="main-nav" aria-label="Hovednavigation">
            <button class="close-menu" aria-label="Luk menu">×</button>

            <ul class="nav-list">

                <!-- GÆST (ikke logget ind): public menu -->
                <th:block th:unless="${isLoggedIn}">
                    <li><a href="/about.html">Om os</a></li>
                    <li><a href="/membership.html">Medlemskab</a></li>
                    <li><a href="/sauna-info.html">Sauna info</a></li>
                    <li><a href="/faq.html">FAQ</a></li>
                    <li><a href="/index.html#contact">Kontakt</a></li>
                    <li><a href="/booking" class="active">Book sauna</a></li>
                </th:block>

                <!-- LOGGET IND: member menu -->
                <th:block th:if="${isLoggedIn}">
                    <li><a href="/member/profile">Profil</a></li>
                    <li><a href="/member/quick-booking">Hurtig booking</a></li>
                    <li><a href="/member/shifts">Vagtplan</a></li>
                    <li><a href="/booking" class="active">Book sauna</a></li>
                </th:block>

            </ul>

            <div class="desktop-lang">
                <button class="lang-switch" data-lang="da">DA</button>
                <button class="lang-switch" data-lang="en">EN</button>
            </div>

            <!-- RIGHT SIDE (DESKTOP) -->
            <div class="top-right-controls">

                <!-- GÆST -->
                <a th:unless="${isLoggedIn}" class="btn btn-primary" href="/login">Log ind</a>

                <!-- LOGGET IND -->
                <a th:if="${isLoggedIn}" class="btn btn-primary" href="/logout">Log ud</a>

            </div>

    </div>
</header>

<div class="menu-overlay"></div>

<!-- CONTENT -->
<!-- Wrap page content with the reusable spacing container -->
<div class="page-content">
    <main class="booking-page">
        <div class="booking-wrapper">

            <div class="booking-header">
                <h1>Book saunaen</h1>
                <p>Vælg et tidsrum for at booke saunaen. Medlemmer kan booke alle medlemstider.</p>
                <p class="booking-user" th:if="${isLoggedIn}" th:text="'Du er logget ind som: ' + ${userName}"></p>
                <p class="booking-user" th:unless="${isLoggedIn}">Du er ikke logget ind.</p>
            </div>

            <div class="week-header">
                <div class="week-nav">
                    <button class="btn btn-secondary" id="prevWeekBtn">&lt; Forrige uge</button>
                </div>

                <div id="weekLabel" class="week-label"></div>

                <div class="week-nav">
                    <button class="btn btn-secondary" id="nextWeekBtn">Næste uge &gt;</button>
                </div>
            </div>

            <div id="calendarContainer">
                <!-- .calendar-grid + rød linje bliver sat ind af booking.js -->
            </div>

            <div id="messageContainer"></div>
        </div>
    </main>
</div>

<!-- MODAL -->
<div class="modal-backdrop" id="bookingModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <h2 id="modalTitle">Bekræft booking</h2>
        <p id="modalText"></p>

        <div class="modal-actions">
            <button class="btn btn-secondary" id="cancelBtn">Annullér</button>

            <!-- Ingen inline style: skjul/vis med CSS + JS -->
            <button class="btn btn-waitlist is-hidden" id="waitlistBtn">Skriv dig op til venteliste</button>

            <button class="btn btn-primary" id="confirmBtn">Book tid</button>
        </div>

        <div id="modalMessage" class="alert"></div>
    </div>
</div>

<!-- DATA + SCRIPTS -->
<script th:inline="javascript">
    const userId = [[${userId}]];
    const isLoggedIn = [[${isLoggedIn}]];
</script>
<script src="/js/lang.js" defer></script>
<script src="/js/main.js" defer></script>
<script src="/js/booking.js" defer></script>

<!-- FOOTER (genbrug fra login) -->
<footer class="footer">
    <div class="footer-inner">

        <p class="footer-title">Følg os</p>

        <div class="footer-socials">
            <a href="https://www.facebook.com/groups/405258223878568" target="_blank" aria-label="Facebook">
                <img src="/icons/facebook.svg" alt="facebook-ikon">
            </a>
            <a href="https://www.instagram.com/boelge.baderne/" target="_blank" aria-label="Instagram">
                <img src="/icons/instagram.svg" alt="instagram-ikon">
            </a>
        </div>

        <div class="footer-links">
            <a href="#">Handelsbetingelser</a>
            <span>•</span>
            <a href="#">Privatlivspolitik</a>
        </div>

        <p class="footer-copy">© 2025 Bølgebaderne</p>

    </div>
</footer>

<button id="scrollTopBtn" aria-label="Til toppen">
    <img src="/icons/up-arrow.svg" alt="pil op-ikon" />
</button>

</body>
</html>
